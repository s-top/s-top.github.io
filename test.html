<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>Vue 测试实例 - 菜鸟教程(runoob.com)</title>
    <script src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
    <style type="text/css">

    </style>
</head>
<body>
    <!--子组件模块-->
    <template id="child-template">
        <input type="text" v-model="msg" title=""/>
        <button v-on:click="notify">Dispatch Event</button>
    </template>
    <!--父组件模板-->
    <div id="enents-example">
        <p>Messages: {{messages | json}}</p>
        <child></child>
    </div>
    <script>
        //注册子组件
        //将当前消息派发出去
        Vue.component('child', {
            template: 'child-template',
            data: function () {
                return {msg: 'hello'}
            },
            methods: {
                notify: function () {
                    if(this.msg.trim()){
                        this.$dispatch('child-msg', this.msg);
                        this.msg = '';
                    }
                }
            }
        });
        //初始化父组件
        //收到消息时将事件推入一个数组中
        var parent = new Vue({
            el: '#events-example',
            data: {
                messages: []
            },
            //在创建实例时，'event'选项简单滴调用'$on'
            events: {
                'child-msg': function (msg) {
                    //事件回调内的'this'自动绑定到注册它的实例上
                    this.messages.push(msg);
                }
            }
        })
    </script>
</body>
</html>