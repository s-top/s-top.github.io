---
layout: post
title: 读书笔记—Git团队协作（二）
tags: [开发技术]
---
#### 在工作流中使用命令

* 关键词：Git For Teams -- 读书笔记

### Part2 在工作流中使用命令

#### 单人团队(独立开发者)

+ 学习目的：
    + 创建一份远程仓库的本地副本
    + 为现有的文件集初始化版本控制
    + 从空的项目目录开始创建一个新的仓库
    + 通过提交消息来检查仓库历史
    + 通过分支来隔离无关的工作
    + 在本地仓库中创建提交
    + 使用标签来高亮单个提交
    + 建立你的项目与远程代码托管系统的连接

#### 1 基于issue的版本控制

“最擅长描述一个问题的人，最有可能能够解决它”。

> 工单包含以下三个主要部分：

1.问题：大致描述你想要解决的问题。

2.原因：为什么你想要做这件事(如果问题得到解决，谁将受益)？

3.质量保证测试：我将如何知道这个问题已经得到解决？

> 工单的另一种格式：

1.卡片：从用户的角度，大致描述这个问题。

2.对话：你想要解决的问题的细节。在可能的情况下，应该避免给出具体的解决方案。

3.确认：用户用于验证问题是否解决的步骤。

#### 1.1 基于issue的版本控制利弊

第一反应就是使用工单的开销相对较大，或许记事本就已经足够。但继续做项目时，开始不断地忘记一些微小的想法。如果为每个想法创建一个分支，最后也会被一大堆过时的分支搞乱。

渐渐找到你使用的代码托管系统中的工单跟踪选项，记录你对软件所做的工作。至少，它会给你一些用于创建分支和跟踪代码的编号。

+ 工作流程：
    + 在你的跟踪系统中创建一个新的工单，注明这个issue编号
    + 在你的本地仓库中，使用issuenumber-description格式创建一个新的分支
    + 完成工单描述的工作(且只完成工单中描述的工作)
    + 测试你的工作，确保已经完成并且是正确的
    + 现在有了一个“杂乱”的工作目录，其中包含了新增的文件和修改过的文件
    + 将你的缓存的修改提交至仓库
    + 将你的更改推送到备用服务器上
    + 当你对你的工作完全满意时，将你的工单分支并入主分支并将修改后的分支推送到代码托管系统中
    + 再一次测试你的工作，确保没有后续问题
    + 将你的工单标记为已关闭

#### 1.2 创建本地仓库

#### 1.2.1 克隆已有的项目：

> git clone https://gitlab.com/gitforteams/gitforteams.git

#### 1.2.2 将已有的项目迁移至Git：

第一种是下载gitforteams-zip。你可以在任何文件夹下使用初始化命令创建一个Git仓库。

> git init(初始化目录的版本控制)

将会看到Initialized empty Git repository in /..../.git/，系统并没有立即将文件加入仓库。这是git的一个特性，因为它同样允许你忽略文件，你需要主动告诉它你想要跟踪哪些文件。

如果存在相关的下一个步骤，git几乎总是会在状态(status)消息中显示有用的建议。

> git status(检测仓库的当前状态)

将文件导入git分为两个步骤。这个功能允许你在工作目录中同时进行多个无关的更改。更改可以被暂存在索引的一组提交中，每组都有一个不同的提交消息。

> git add --all(将仓库中所有文件添加至暂存区)

之后，你可以使用commit命令将你当前的状态保存到仓库。

> git commit -m "Initial import of all projct files."(将所有暂存的文件提交至仓库)

#### 1.2.3 初始化空项目

从一个什么都没有的空目录开始。

> mkdir empty-repository 和 cd empty-repository

> git init(运行git初始化命令) 和 ls -al(确认已添加隐藏的仓库文件夹)

#### 1.2.4 查看历史记录

log命令将按时间倒序输出仓库中提交消息的完整历史记录。

> git log(使用log命令查看仓库历史记录)

对于完事的代码库上的工作，看完这些消息所需的工作量是巨大且复杂的。你可以通过--oneline参数来缩短消息，只显示消息的第一行。按Q退出。

> git log --oneline(查看缩短的项目历史记录)

#### 1.3 使用分支工作

#### 1.3.1 列出分支

在默认情况下，会将master分支复制到你的本地仓库中，然后你可以直接在这个分支上工作。

> git branch --list(列出所有分支) 或者 --all(列出所有分支)

如果你在克隆仓库的本地副本中执行这个命令，应该会同时看到你的本地分支和一个远程分支。

其中，*表示你当前正在查看(或“签出”)的分支。剩下几行以remotes/origin开头：

remotes仅表示“不在本地”。

origin是一个默认约定，表示“我的副本是从这克隆的”。

最后一部分就是分支名。

> git branch --remotes(列出远程分支)

你可以访问到这些远程分支，尽管你需要在向它们提交更改之前创建你自己的副本。

#### 1.3.2 更新远程分支列表

远程分支列表不会自动更新，因此这个列表将会随着时间而落后。使用fetch命令更新这个列表。

> git fetch(获取更新的列表和所有远程分支的内容)

#### 1.3.3 使用不同的分支

当你























